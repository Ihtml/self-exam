### 1.第一章 时延与速率的计算
- 网络计量单位转换：P36第2段，K/M/G, ms/us, 1Byte=8bit

- 网络时延=处理时延+排队时延+传输时延+传播时延，处理时延和排队时延一般很小，可以忽略。

- 传输时延（主机的数据传输到网络上面）dt (s) = L/R, L是传输总量（主机发送的数据总量），R是链路带宽。

- 传播时延（数据进入网络后，从发出地到目的地耗费的时间）dp (s) = D / V, D是传播距离，V是传播速度

- 时延带宽积 G = dp * R, 计算单位是位，即比特

  

### 2.第二章 文件最小分发时间

- 网络计量单位转换：p36第2段， 1Byte=8bit

- CS结构文件分发公式，p76 2-1, Dcs = max {nF/us, F/dmin}

- P2P结构文件分发公式，P76 2-3, Dp2p = max {F/us, F/dmin. nF/(us+ $\sum$ui)} 包含文件在客户之间相互交换的时间

  F是文件大小，n是用户数量，dmin是下载速度，us是上传到服务器的上传速度，ui是客户之间的上传速度

- 随着用户人数增加，客户/服务器模式的时间翻倍增加，但P2P模式时间不变



### 3.GNB协议分组序号（滑动窗口）+信道利用率

- 滑动窗口的发送窗口、接收窗口，P104图3.7

- GNB协议的思想，P106第1段，收到的确认号最小值加1，及以后的数据段都要重发

- 信道利用率P109公式3-8, **U = (Ws * tseg) / (tesg + RTT + tack)**

  **Ws**是发送窗口大小，即最多发送多少数据段后就要停下来等确认

  **tesg**是传输时延，**tseg = L / R,** L是数据传输总量，R是链路带宽

  RTT是往返传播时延，包含来回两趟传播

  trak是确认处理时延，一般忽略

  

- **SR**，选择重传，收到确认的不需要重传



### 4. 第三章 TCP报文段结构+序号和确认序号

- TCP报文段结构，p113-114

- 理解序号和确认号的含义

  - 序号是发送方使用的，表示发送数据的字节开始编号，例如序号100，表示发送方前面已发送0-99编号的字节，现在从第100字节开始发送

  - 确认号是接收方使用的，表示已成功接收的字节编号+1.例如接收方已正确接收0-99编号的字节，则发送确认号100，表示发送方下次从第100号字节开始发送。

    ![](https://raw.githubusercontent.com/Ihtml/images/master/img/20200823171957.png)

    一行4字节，至少有5行，也就是TCP报文段至少20个字节。



### 5. 第三章 TCP三次握手+序号变化

- TCP三次握手过程，p117

- 理解序列号、应答号、标志状态的变化

  - 第一次握手：A向B发出连接**请求**，标志SYN=1，序列号seq=x

  - 第二次握手：B向A发出连接**确认**，标志SYN=1，ACK=1，序列号seq=y, 应答号ack_seq=x+1

  - 第三次握手：A向B发出连接**确认**，标志SYN=0，ACk=1， 序列号seq=x+1, 应答号ack_seq = y+1




### 6.IP数据报结构+分片

- IP数据报结构 P143-144

- 数据报分片：标志位DF、MF、片偏移字段的计算

  - 每个IP数据报的首部至少**20字节**，所以数据部分最多1480字节

  - DF为0表示数据报是分片的，DF为1表示数据报不分片整个发送

  - MF为0表示数据是**不分片的**，或者数据报是**分片的最后一片**

  - MF为**1表示数据报是分片的，且当前这一片不是最后一片**，MF为1则DF必然为0

  - 片偏移字段=**发送数据的开始字节号/8**

    ![](https://raw.githubusercontent.com/Ihtml/images/master/img/20200823235552.png)

